# 在线离线

设备配置可以设置超时时间和心跳判断，如果超过超时时间没有收到心跳，则认为设备离线。
对于设备总的在线离线统计就变成了挑战
设备上行数据有遥测、属性、事件三种类型
任何一种数据的上报，都要更新设备的最后一次上报时间

考虑到物联网平台的设备数量巨大，如何高效地进行设备的在线离线统计，是一个重要的问题。
目前最后一次上报时间并没有记录

如何处理在线离线统计问题？

方案1 采用redis消息过期通知功能

docker run --name tp-redis-test \
-d -p 8666:6379 \
redis redis-server --requirepass redis --notify-keyspace-events Ex
